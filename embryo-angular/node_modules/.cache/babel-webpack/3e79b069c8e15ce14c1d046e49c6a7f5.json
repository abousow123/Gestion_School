{"ast":null,"code":"var _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport _isFinite from 'lodash/isFinite';\nimport { checkRendering } from '../../lib/utils.js';\nvar usage = 'Usage:\\nvar customNumericRefinementList = connectNumericRefinementList(function renderFn(params, isFirstRendering) {\\n  // params = {\\n  //   createURL,\\n  //   items,\\n  //   hasNoResults,\\n  //   refine,\\n  //   instantSearchInstance,\\n  //   widgetParams,\\n  //  }\\n});\\n\\nsearch.addWidget(\\n  customNumericRefinementList({\\n    attributeName,\\n    options,\\n    [ transformItems ],\\n  })\\n);\\n\\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectNumericRefinementList.html\\n';\n/**\n * @typedef {Object} NumericRefinementListOption\n * @property {string} name Name of the option.\n * @property {number} start Lower bound of the option (>=).\n * @property {number} end Higher bound of the option (<=).\n */\n\n/**\n * @typedef {Object} NumericRefinementListItem\n * @property {string} label Name of the option.\n * @property {string} value URL encoded of the bounds object with the form `{start, end}`. This value can be used verbatim in the webpage and can be read by `refine` directly. If you want to inspect the value, you can do `JSON.parse(window.decodeURI(value))` to get the object.\n * @property {boolean} isRefined True if the value is selected.\n */\n\n/**\n * @typedef {Object} CustomNumericRefinementListWidgetOptions\n * @property {string} attributeName Name of the attribute for filtering.\n * @property {NumericRefinementListOption[]} options List of all the options.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} NumericRefinementListRenderingOptions\n * @property {function(item.value): string} createURL Creates URLs for the next state, the string is the name of the selected option.\n * @property {NumericRefinementListItem[]} items The list of available choices.\n * @property {boolean} hasNoResults `true` if the last search contains no result.\n * @property {function(item.value)} refine Sets the selected value and trigger a new search.\n * @property {Object} widgetParams All original `CustomNumericRefinementListWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **NumericRefinementList** connector provides the logic to build a custom widget that will give the user the ability to choose a range on to refine the search results.\n *\n * It provides a `refine(item)` function to refine on the selected range.\n *\n * **Requirement:** the attribute passed as `attributeName` must be present in \"attributes for faceting\" on the Algolia dashboard or configured as attributesForFaceting via a set settings call to the Algolia API.\n * @function connectNumericRefinementList\n * @type {Connector}\n * @canonical https://www.algolia.com/doc/api-reference/widgets/numeric-menu/js/\n * @param {function(NumericRefinementListRenderingOptions, boolean)} renderFn Rendering function for the custom **NumericRefinementList** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomNumericRefinementListWidgetOptions)} Re-usable widget factory for a custom **NumericRefinementList** widget.\n * @example\n * // custom `renderFn` to render the custom NumericRefinementList widget\n * function renderFn(NumericRefinementListRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     NumericRefinementListRenderingOptions.widgetParams.containerNode.html('<ul></ul>');\n *   }\n *\n *   NumericRefinementListRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() { $(this).off('click'); });\n *\n *   var list = NumericRefinementListRenderingOptions.items.map(function(item) {\n *     return '<li data-refine-value=\"' + item.value + '\">' +\n *       '<input type=\"radio\"' + (item.isRefined ? ' checked' : '') + '/> ' +\n *       item.label + '</li>';\n *   });\n *\n *   NumericRefinementListRenderingOptions.widgetParams.containerNode.find('ul').html(list);\n *   NumericRefinementListRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() {\n *       $(this).on('click', function(event) {\n *         event.preventDefault();\n *         event.stopPropagation();\n *         NumericRefinementListRenderingOptions.refine($(this).data('refine-value'));\n *       });\n *     });\n * }\n *\n * // connect `renderFn` to NumericRefinementList logic\n * var customNumericRefinementList = instantsearch.connectors.connectNumericRefinementList(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customNumericRefinementList({\n *     containerNode: $('#custom-numeric-refinement-container'),\n *     attributeName: 'price',\n *     options: [\n *       {name: 'All'},\n *       {end: 4, name: 'less than 4'},\n *       {start: 4, end: 4, name: '4'},\n *       {start: 5, end: 10, name: 'between 5 and 10'},\n *       {start: 10, name: 'more than 10'},\n *     ],\n *   })\n * );\n */\n\nexport default function connectNumericRefinementList(renderFn, unmountFn) {\n  checkRendering(renderFn, usage);\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attributeName = widgetParams.attributeName,\n        options = widgetParams.options,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === undefined ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n    if (!attributeName || !options) {\n      throw new Error(usage);\n    }\n\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n\n        this._refine = function (facetValue) {\n          var refinedState = refine(helper.state, attributeName, options, facetValue);\n          helper.setState(refinedState).search();\n        };\n\n        this._createURL = function (state) {\n          return function (facetValue) {\n            return createURL(refine(state, attributeName, options, facetValue));\n          };\n        };\n\n        this._prepareItems = function (state) {\n          return options.map(function (_ref2) {\n            var start = _ref2.start,\n                end = _ref2.end,\n                label = _ref2.name;\n            return {\n              label: label,\n              value: window.encodeURI(JSON.stringify({\n                start: start,\n                end: end\n              })),\n              isRefined: isRefined(state, attributeName, {\n                start: start,\n                end: end\n              })\n            };\n          });\n        };\n\n        renderFn({\n          createURL: this._createURL(helper.state),\n          items: transformItems(this._prepareItems(helper.state)),\n          hasNoResults: true,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n        renderFn({\n          createURL: this._createURL(state),\n          items: transformItems(this._prepareItems(state)),\n          hasNoResults: results.nbHits === 0,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n        return state.clearRefinements(attributeName);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var currentRefinements = searchParameters.getNumericRefinements(attributeName);\n        var equal = currentRefinements['='] && currentRefinements['='][0];\n\n        if (equal || equal === 0) {\n          return _extends({}, uiState, {\n            numericRefinementList: _extends({}, uiState.numericRefinementList, _defineProperty({}, attributeName, '' + currentRefinements['=']))\n          });\n        }\n\n        var lowerBound = currentRefinements['>='] && currentRefinements['>='][0] || '';\n        var upperBound = currentRefinements['<='] && currentRefinements['<='][0] || '';\n\n        if (lowerBound !== '' || upperBound !== '') {\n          if (uiState.numericRefinementList && uiState.numericRefinementList[attributeName] === lowerBound + ':' + upperBound) return uiState;\n          return _extends({}, uiState, {\n            numericRefinementList: _extends({}, uiState.numericRefinementList, _defineProperty({}, attributeName, lowerBound + ':' + upperBound))\n          });\n        }\n\n        return uiState;\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        var clearedParams = searchParameters.clearRefinements(attributeName);\n        var value = uiState.numericRefinementList && uiState.numericRefinementList[attributeName];\n\n        if (!value) {\n          return clearedParams;\n        }\n\n        var valueAsEqual = value.indexOf(':') === -1 && value;\n\n        if (valueAsEqual) {\n          return clearedParams.addNumericRefinement(attributeName, '=', valueAsEqual);\n        }\n\n        var _value$split$map = value.split(':').map(parseFloat),\n            _value$split$map2 = _slicedToArray(_value$split$map, 2),\n            lowerBound = _value$split$map2[0],\n            upperBound = _value$split$map2[1];\n\n        if (_isFinite(lowerBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attributeName, '>=', lowerBound);\n        }\n\n        if (_isFinite(upperBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attributeName, '<=', upperBound);\n        }\n\n        return clearedParams;\n      }\n    };\n  };\n}\n\nfunction isRefined(state, attributeName, option) {\n  var currentRefinements = state.getNumericRefinements(attributeName);\n\n  if (option.start !== undefined && option.end !== undefined) {\n    if (option.start === option.end) {\n      return hasNumericRefinement(currentRefinements, '=', option.start);\n    }\n  }\n\n  if (option.start !== undefined) {\n    return hasNumericRefinement(currentRefinements, '>=', option.start);\n  }\n\n  if (option.end !== undefined) {\n    return hasNumericRefinement(currentRefinements, '<=', option.end);\n  }\n\n  if (option.start === undefined && option.end === undefined) {\n    return Object.keys(currentRefinements).length === 0;\n  }\n\n  return undefined;\n}\n\nfunction refine(state, attributeName, options, facetValue) {\n  var resolvedState = state;\n  var refinedOption = JSON.parse(window.decodeURI(facetValue));\n  var currentRefinements = resolvedState.getNumericRefinements(attributeName);\n\n  if (refinedOption.start === undefined && refinedOption.end === undefined) {\n    return resolvedState.clearRefinements(attributeName);\n  }\n\n  if (!isRefined(resolvedState, attributeName, refinedOption)) {\n    resolvedState = resolvedState.clearRefinements(attributeName);\n  }\n\n  if (refinedOption.start !== undefined && refinedOption.end !== undefined) {\n    if (refinedOption.start > refinedOption.end) {\n      throw new Error('option.start should be > to option.end');\n    }\n\n    if (refinedOption.start === refinedOption.end) {\n      if (hasNumericRefinement(currentRefinements, '=', refinedOption.start)) {\n        resolvedState = resolvedState.removeNumericRefinement(attributeName, '=', refinedOption.start);\n      } else {\n        resolvedState = resolvedState.addNumericRefinement(attributeName, '=', refinedOption.start);\n      }\n\n      return resolvedState;\n    }\n  }\n\n  if (refinedOption.start !== undefined) {\n    if (hasNumericRefinement(currentRefinements, '>=', refinedOption.start)) {\n      resolvedState = resolvedState.removeNumericRefinement(attributeName, '>=', refinedOption.start);\n    } else {\n      resolvedState = resolvedState.addNumericRefinement(attributeName, '>=', refinedOption.start);\n    }\n  }\n\n  if (refinedOption.end !== undefined) {\n    if (hasNumericRefinement(currentRefinements, '<=', refinedOption.end)) {\n      resolvedState = resolvedState.removeNumericRefinement(attributeName, '<=', refinedOption.end);\n    } else {\n      resolvedState = resolvedState.addNumericRefinement(attributeName, '<=', refinedOption.end);\n    }\n  }\n\n  resolvedState.page = 0;\n  return resolvedState;\n}\n\nfunction hasNumericRefinement(currentRefinements, operator, value) {\n  var hasOperatorRefinements = currentRefinements[operator] !== undefined;\n  return hasOperatorRefinements && currentRefinements[operator].includes(value);\n}","map":{"version":3,"sources":["/home/sow/Bureau/ProjetPerso/Gestion_School/embryo-angular/node_modules/instantsearch.js/es/connectors/numeric-refinement-list/connectNumericRefinementList.js"],"names":["_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","_defineProperty","obj","defineProperty","enumerable","configurable","writable","_isFinite","checkRendering","usage","connectNumericRefinementList","renderFn","unmountFn","widgetParams","attributeName","options","_widgetParams$transfo","transformItems","items","Error","init","_ref","helper","createURL","instantSearchInstance","_refine","facetValue","refinedState","refine","state","setState","search","_createURL","_prepareItems","map","_ref2","start","end","label","name","window","encodeURI","JSON","stringify","isRefined","hasNoResults","render","_ref3","results","nbHits","dispose","_ref4","clearRefinements","getWidgetState","uiState","_ref5","searchParameters","currentRefinements","getNumericRefinements","equal","numericRefinementList","lowerBound","upperBound","getWidgetSearchParameters","_ref6","clearedParams","valueAsEqual","indexOf","addNumericRefinement","_value$split$map","split","parseFloat","_value$split$map2","option","hasNumericRefinement","keys","resolvedState","refinedOption","parse","decodeURI","removeNumericRefinement","page","operator","hasOperatorRefinements","includes"],"mappings":"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","sourcesContent":["var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport _isFinite from 'lodash/isFinite';\n\nimport { checkRendering } from '../../lib/utils.js';\n\nvar usage = 'Usage:\\nvar customNumericRefinementList = connectNumericRefinementList(function renderFn(params, isFirstRendering) {\\n  // params = {\\n  //   createURL,\\n  //   items,\\n  //   hasNoResults,\\n  //   refine,\\n  //   instantSearchInstance,\\n  //   widgetParams,\\n  //  }\\n});\\n\\nsearch.addWidget(\\n  customNumericRefinementList({\\n    attributeName,\\n    options,\\n    [ transformItems ],\\n  })\\n);\\n\\nFull documentation available at https://community.algolia.com/instantsearch.js/v2/connectors/connectNumericRefinementList.html\\n';\n\n/**\n * @typedef {Object} NumericRefinementListOption\n * @property {string} name Name of the option.\n * @property {number} start Lower bound of the option (>=).\n * @property {number} end Higher bound of the option (<=).\n */\n\n/**\n * @typedef {Object} NumericRefinementListItem\n * @property {string} label Name of the option.\n * @property {string} value URL encoded of the bounds object with the form `{start, end}`. This value can be used verbatim in the webpage and can be read by `refine` directly. If you want to inspect the value, you can do `JSON.parse(window.decodeURI(value))` to get the object.\n * @property {boolean} isRefined True if the value is selected.\n */\n\n/**\n * @typedef {Object} CustomNumericRefinementListWidgetOptions\n * @property {string} attributeName Name of the attribute for filtering.\n * @property {NumericRefinementListOption[]} options List of all the options.\n * @property {function(object[]):object[]} [transformItems] Function to transform the items passed to the templates.\n */\n\n/**\n * @typedef {Object} NumericRefinementListRenderingOptions\n * @property {function(item.value): string} createURL Creates URLs for the next state, the string is the name of the selected option.\n * @property {NumericRefinementListItem[]} items The list of available choices.\n * @property {boolean} hasNoResults `true` if the last search contains no result.\n * @property {function(item.value)} refine Sets the selected value and trigger a new search.\n * @property {Object} widgetParams All original `CustomNumericRefinementListWidgetOptions` forwarded to the `renderFn`.\n */\n\n/**\n * **NumericRefinementList** connector provides the logic to build a custom widget that will give the user the ability to choose a range on to refine the search results.\n *\n * It provides a `refine(item)` function to refine on the selected range.\n *\n * **Requirement:** the attribute passed as `attributeName` must be present in \"attributes for faceting\" on the Algolia dashboard or configured as attributesForFaceting via a set settings call to the Algolia API.\n * @function connectNumericRefinementList\n * @type {Connector}\n * @canonical https://www.algolia.com/doc/api-reference/widgets/numeric-menu/js/\n * @param {function(NumericRefinementListRenderingOptions, boolean)} renderFn Rendering function for the custom **NumericRefinementList** widget.\n * @param {function} unmountFn Unmount function called when the widget is disposed.\n * @return {function(CustomNumericRefinementListWidgetOptions)} Re-usable widget factory for a custom **NumericRefinementList** widget.\n * @example\n * // custom `renderFn` to render the custom NumericRefinementList widget\n * function renderFn(NumericRefinementListRenderingOptions, isFirstRendering) {\n *   if (isFirstRendering) {\n *     NumericRefinementListRenderingOptions.widgetParams.containerNode.html('<ul></ul>');\n *   }\n *\n *   NumericRefinementListRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() { $(this).off('click'); });\n *\n *   var list = NumericRefinementListRenderingOptions.items.map(function(item) {\n *     return '<li data-refine-value=\"' + item.value + '\">' +\n *       '<input type=\"radio\"' + (item.isRefined ? ' checked' : '') + '/> ' +\n *       item.label + '</li>';\n *   });\n *\n *   NumericRefinementListRenderingOptions.widgetParams.containerNode.find('ul').html(list);\n *   NumericRefinementListRenderingOptions.widgetParams.containerNode\n *     .find('li[data-refine-value]')\n *     .each(function() {\n *       $(this).on('click', function(event) {\n *         event.preventDefault();\n *         event.stopPropagation();\n *         NumericRefinementListRenderingOptions.refine($(this).data('refine-value'));\n *       });\n *     });\n * }\n *\n * // connect `renderFn` to NumericRefinementList logic\n * var customNumericRefinementList = instantsearch.connectors.connectNumericRefinementList(renderFn);\n *\n * // mount widget on the page\n * search.addWidget(\n *   customNumericRefinementList({\n *     containerNode: $('#custom-numeric-refinement-container'),\n *     attributeName: 'price',\n *     options: [\n *       {name: 'All'},\n *       {end: 4, name: 'less than 4'},\n *       {start: 4, end: 4, name: '4'},\n *       {start: 5, end: 10, name: 'between 5 and 10'},\n *       {start: 10, name: 'more than 10'},\n *     ],\n *   })\n * );\n */\nexport default function connectNumericRefinementList(renderFn, unmountFn) {\n  checkRendering(renderFn, usage);\n\n  return function () {\n    var widgetParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var attributeName = widgetParams.attributeName,\n        options = widgetParams.options,\n        _widgetParams$transfo = widgetParams.transformItems,\n        transformItems = _widgetParams$transfo === undefined ? function (items) {\n      return items;\n    } : _widgetParams$transfo;\n\n\n    if (!attributeName || !options) {\n      throw new Error(usage);\n    }\n\n    return {\n      init: function init(_ref) {\n        var helper = _ref.helper,\n            createURL = _ref.createURL,\n            instantSearchInstance = _ref.instantSearchInstance;\n\n        this._refine = function (facetValue) {\n          var refinedState = refine(helper.state, attributeName, options, facetValue);\n          helper.setState(refinedState).search();\n        };\n\n        this._createURL = function (state) {\n          return function (facetValue) {\n            return createURL(refine(state, attributeName, options, facetValue));\n          };\n        };\n        this._prepareItems = function (state) {\n          return options.map(function (_ref2) {\n            var start = _ref2.start,\n                end = _ref2.end,\n                label = _ref2.name;\n            return {\n              label: label,\n              value: window.encodeURI(JSON.stringify({ start: start, end: end })),\n              isRefined: isRefined(state, attributeName, { start: start, end: end })\n            };\n          });\n        };\n\n        renderFn({\n          createURL: this._createURL(helper.state),\n          items: transformItems(this._prepareItems(helper.state)),\n          hasNoResults: true,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, true);\n      },\n      render: function render(_ref3) {\n        var results = _ref3.results,\n            state = _ref3.state,\n            instantSearchInstance = _ref3.instantSearchInstance;\n\n        renderFn({\n          createURL: this._createURL(state),\n          items: transformItems(this._prepareItems(state)),\n          hasNoResults: results.nbHits === 0,\n          refine: this._refine,\n          instantSearchInstance: instantSearchInstance,\n          widgetParams: widgetParams\n        }, false);\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n\n        unmountFn();\n        return state.clearRefinements(attributeName);\n      },\n      getWidgetState: function getWidgetState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n\n        var currentRefinements = searchParameters.getNumericRefinements(attributeName);\n        var equal = currentRefinements['='] && currentRefinements['='][0];\n        if (equal || equal === 0) {\n          return _extends({}, uiState, {\n            numericRefinementList: _extends({}, uiState.numericRefinementList, _defineProperty({}, attributeName, '' + currentRefinements['=']))\n          });\n        }\n\n        var lowerBound = currentRefinements['>='] && currentRefinements['>='][0] || '';\n        var upperBound = currentRefinements['<='] && currentRefinements['<='][0] || '';\n\n        if (lowerBound !== '' || upperBound !== '') {\n          if (uiState.numericRefinementList && uiState.numericRefinementList[attributeName] === lowerBound + ':' + upperBound) return uiState;\n          return _extends({}, uiState, {\n            numericRefinementList: _extends({}, uiState.numericRefinementList, _defineProperty({}, attributeName, lowerBound + ':' + upperBound))\n          });\n        }\n\n        return uiState;\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n\n        var clearedParams = searchParameters.clearRefinements(attributeName);\n        var value = uiState.numericRefinementList && uiState.numericRefinementList[attributeName];\n\n        if (!value) {\n          return clearedParams;\n        }\n\n        var valueAsEqual = value.indexOf(':') === -1 && value;\n\n        if (valueAsEqual) {\n          return clearedParams.addNumericRefinement(attributeName, '=', valueAsEqual);\n        }\n\n        var _value$split$map = value.split(':').map(parseFloat),\n            _value$split$map2 = _slicedToArray(_value$split$map, 2),\n            lowerBound = _value$split$map2[0],\n            upperBound = _value$split$map2[1];\n\n        if (_isFinite(lowerBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attributeName, '>=', lowerBound);\n        }\n\n        if (_isFinite(upperBound)) {\n          clearedParams = clearedParams.addNumericRefinement(attributeName, '<=', upperBound);\n        }\n\n        return clearedParams;\n      }\n    };\n  };\n}\n\nfunction isRefined(state, attributeName, option) {\n  var currentRefinements = state.getNumericRefinements(attributeName);\n\n  if (option.start !== undefined && option.end !== undefined) {\n    if (option.start === option.end) {\n      return hasNumericRefinement(currentRefinements, '=', option.start);\n    }\n  }\n\n  if (option.start !== undefined) {\n    return hasNumericRefinement(currentRefinements, '>=', option.start);\n  }\n\n  if (option.end !== undefined) {\n    return hasNumericRefinement(currentRefinements, '<=', option.end);\n  }\n\n  if (option.start === undefined && option.end === undefined) {\n    return Object.keys(currentRefinements).length === 0;\n  }\n\n  return undefined;\n}\n\nfunction refine(state, attributeName, options, facetValue) {\n  var resolvedState = state;\n\n  var refinedOption = JSON.parse(window.decodeURI(facetValue));\n\n  var currentRefinements = resolvedState.getNumericRefinements(attributeName);\n\n  if (refinedOption.start === undefined && refinedOption.end === undefined) {\n    return resolvedState.clearRefinements(attributeName);\n  }\n\n  if (!isRefined(resolvedState, attributeName, refinedOption)) {\n    resolvedState = resolvedState.clearRefinements(attributeName);\n  }\n\n  if (refinedOption.start !== undefined && refinedOption.end !== undefined) {\n    if (refinedOption.start > refinedOption.end) {\n      throw new Error('option.start should be > to option.end');\n    }\n\n    if (refinedOption.start === refinedOption.end) {\n      if (hasNumericRefinement(currentRefinements, '=', refinedOption.start)) {\n        resolvedState = resolvedState.removeNumericRefinement(attributeName, '=', refinedOption.start);\n      } else {\n        resolvedState = resolvedState.addNumericRefinement(attributeName, '=', refinedOption.start);\n      }\n      return resolvedState;\n    }\n  }\n\n  if (refinedOption.start !== undefined) {\n    if (hasNumericRefinement(currentRefinements, '>=', refinedOption.start)) {\n      resolvedState = resolvedState.removeNumericRefinement(attributeName, '>=', refinedOption.start);\n    } else {\n      resolvedState = resolvedState.addNumericRefinement(attributeName, '>=', refinedOption.start);\n    }\n  }\n\n  if (refinedOption.end !== undefined) {\n    if (hasNumericRefinement(currentRefinements, '<=', refinedOption.end)) {\n      resolvedState = resolvedState.removeNumericRefinement(attributeName, '<=', refinedOption.end);\n    } else {\n      resolvedState = resolvedState.addNumericRefinement(attributeName, '<=', refinedOption.end);\n    }\n  }\n\n  resolvedState.page = 0;\n\n  return resolvedState;\n}\n\nfunction hasNumericRefinement(currentRefinements, operator, value) {\n  var hasOperatorRefinements = currentRefinements[operator] !== undefined;\n\n  return hasOperatorRefinements && currentRefinements[operator].includes(value);\n}"]},"metadata":{},"sourceType":"module"}